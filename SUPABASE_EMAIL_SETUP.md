# Supabase Email Setup Guide

## Issue: Code Missing from Email

By default, Supabase sends magic links in emails, but the **OTP code** is only included if you configure the email template properly.

## Solution: Configure Email Template in Supabase

1. Go to your Supabase Dashboard: https://supabase.com/dashboard/project/azriosdfhdmmmroqiksx
2. Navigate to **Authentication** → **Email Templates**
3. Find the **"Magic Link"** template
4. Edit the template to include the OTP code

### Email Template Variables

Supabase provides these variables you can use in the email template:

- `{{ .Token }}` - The OTP code (6-digit number)
- `{{ .TokenHash }}` - Hashed token
- `{{ .ConfirmationURL }}` - The magic link URL
- `{{ .Email }}` - User's email
- `{{ .SiteURL }}` - Your site URL

### Recommended Email Template

Here's a template that includes both the magic link AND the code:

```html
<h2>Magic Link</h2>

<p>Click the link below to sign in:</p>
<p><a href="{{ .ConfirmationURL }}">Sign In</a></p>

<p>Or enter this code on the login page:</p>
<p style="font-size: 24px; font-weight: bold; letter-spacing: 4px;">{{ .Token }}</p>

<p>This code will expire in 1 hour.</p>
```

### Alternative: Use OTP Email Template

You can also use the **"OTP"** template instead, which is designed specifically for code-based authentication:

1. Go to **Authentication** → **Email Templates**
2. Find **"OTP"** template
3. Customize it to include the code prominently

## Testing

After updating the template:

1. Request a new magic link
2. Check your email
3. You should see both:
   - A clickable magic link
   - A 6-digit code you can enter manually

## Note

The code is automatically generated by Supabase when you use `signInWithOtp`. The email template just controls how it's displayed to the user.

